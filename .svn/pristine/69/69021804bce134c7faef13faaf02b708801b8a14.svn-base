!function(){"use strict";angular.module("ljxTools",[])}(),function(){"use strict";angular.module("ljxTools").controller("ljxGoodsBoxCtrl",["$scope",function(e){e.maxItems=6,e.classifyId="",e.classifyName="热门课程",e.displayType="CellBox",e.items=[],e.loadData=function(t){e.items=t},e._getTemplateUrl=function(){var t="";return t="app"==e.platform?$('script[src*="ljxSaleGoods.js"]').length>0?$('script[src*="ljxSaleGoods.js"]').attr("src").replace("ljxSaleGoods.js","directives/ljxGoodsBox.directive.app.html"):$('script[src*="ljxSaleGoods.min.js"]').attr("src").replace("ljxSaleGoods.min.js","directives/ljxGoodsBox.directive.app.html"):$('script[src*="ljxSaleGoods.js"]').length>0?$('script[src*="ljxSaleGoods.js"]').attr("src").replace("ljxSaleGoods.js","directives/ljxGoodsBox.directive.pc.html"):$('script[src*="ljxSaleGoods.min.js"]').attr("src").replace("ljxSaleGoods.min.js","directives/ljxGoodsBox.directive.pc.html")}}])}(),function(){"use strict";angular.module("ljxTools").controller("ljxGoodsItemCtrl",["$scope","$rootScope","$location",function(e,t,a){e.componentName="ljxGoodsItem",e.img="",e.title="title",e.starRating=3,e.commentNumber=0,e.status="status",e.infos=[],e.href="",e.bootstrapSize=t.bootstrapSize,e.loadData=function(t){t&&(t.componentName=e.componentName,e.img=t.img,e.title=t.title,e.starRating=t.starRating,e.commentNumber=t.commentNumber,e.status=t.status,e.infos=t.infos,e.displayType=t.displayType,e.href=t.href)},e._onClicked=function(t){e.href||""===e.href?a.path(e.href):e.$emit("clicked",{item:t})},e._getTemplateUrl=function(){var t="";return t="app"==e.platform?$('script[src*="ljxSaleGoods.js"]').length>0?$('script[src*="ljxSaleGoods.js"]').attr("src").replace("ljxSaleGoods.js","directives/ljxGoodsItem.directive.app.html"):$('script[src*="ljxSaleGoods.min.js"]').attr("src").replace("ljxSaleGoods.min.js","directives/ljxGoodsItem.directive.app.html"):$('script[src*="ljxSaleGoods.js"]').length>0?$('script[src*="ljxSaleGoods.js"]').attr("src").replace("ljxSaleGoods.js","directives/ljxGoodsItem.directive.pc.html"):$('script[src*="ljxSaleGoods.min.js"]').attr("src").replace("ljxSaleGoods.min.js","directives/ljxGoodsItem.directive.pc.html")},e.$on("onresize",function(t,a){e.bootstrapSize=a.bootstrapSize})}])}(),function(){angular.module("ljxTools").controller("ljxListBoxCtrl",["$scope","$q","$timeout",function(e,t,a){e._items=[],e._pageCount=0,e._currentPage=1,e.init=function(){"显示全部"===e.displayMode?e._initAllData():e._initPageData()},e._initAllData=function(){e._items=e.items},e._initPageData=function(){e._pageCount=parseInt(e.count/e.pageStep),e.count%e.pageStep>0&&e._pageCount++,e._currentPage=1,e._toPage(e._currentPage)},e.scrollPage=function(){e._currentPage<e._pageCount&&e._toPage(e._currentPage+1)},e._toPage=function(t){if(e.items){var a=parseInt((t-1)*e.pageStep),o=parseInt(t*e.pageStep>e.count?e.count-(t-1)*e.pageStep:e.pageStep),l=a+o;e._tmpStart=a,e._tmpLimit=o,e.items.length<l?e._loadData({start:a,limit:o}).then(function(t){for(var a=0;a<t.length;a++)e.items.push(t[a]);e._showPage(e._tmpStart,e._tmpLimit)},function(e){}):e._showPage(e._tmpStart,e._tmpLimit)}},e._showPage=function(t,a){e._items=[];for(var o=0;o<a;o++)e._items.push(e.items[t+o])},e._loadData=function(o){var l=t.defer();return e.queryAllData?e.queryPageData||e.queryPageData(o).then(function(e){l.resolve(e)},function(e){l.reject(e)}):e.queryAllData(o).then(function(e){l.resolve(e)},function(e){l.reject(e)}),a(function(){a.cancel(),l.reject("没有设置加载函数")},100),l.promise},e._getTemplateUrl=function(){var t="";return t=e.platform?$('script[src*="ljxSaleGoods.js"]').length>0?$('script[src*="ljxSaleGoods.js"]').attr("src").replace("ljxSaleGoods.js","directives/ljxListBox.directive.app.html"):$('script[src*="ljxSaleGoods.min.js"]').attr("src").replace("ljxSaleGoods.min.js","directives/ljxListBox.directive.app.html"):$('script[src*="ljxSaleGoods.js"]').length>0?$('script[src*="ljxSaleGoods.js"]').attr("src").replace("ljxSaleGoods.js","directives/ljxListBox.directive.pc.html"):$('script[src*="ljxSaleGoods.min.js"]').attr("src").replace("ljxSaleGoods.min.js","directives/ljxListBox.directive.pc.html")}}])}(),function(){"use strict";angular.module("ljxTools").controller("ljxMobileTreeCtrl",["$scope",function(e){e.componentName="ljxMobileTree",e.nodes=[],e.list=[],e.nodeStack=[],e.$on("goBack",function(t,a){a.componentName==e.componentName&&e.toParent()}),e.loadData=function(){e.list=e.nodes},e.toParent=function(){if(e.nodeStack.pop(),e.nodeStack.length<=0)e.list=e.nodes;else{var t=e.nodeStack[e.nodeStack.length-1];e.list=t.nodes}},e.toChild=function(t){e.onClick(t),t.type&&"课程"==t.type||(e.nodeStack.push(t),e.list=t.nodes)},e.onClick=function(t){e.$emit("click",{componentName:e.componentName,data:t})},e._getTemplateUrl=function(){var t="";return t="app"==e.platform?$('script[src*="ljxSaleGoods.js"]').length>0?$('script[src*="ljxSaleGoods.js"]').attr("src").replace("ljxSaleGoods.js","directives/ljxMobileTree.directive.app.html"):$('script[src*="ljxSaleGoods.min.js"]').attr("src").replace("ljxSaleGoods.min.js","directives/ljxMobileTree.directive.app.html"):$('script[src*="ljxSaleGoods.js"]').length>0?$('script[src*="ljxSaleGoods.js"]').attr("src").replace("ljxSaleGoods.js","directives/ljxMobileTree.directive.pc.html"):$('script[src*="ljxSaleGoods.min.js"]').attr("src").replace("ljxSaleGoods.min.js","directives/ljxMobileTree.directive.pc.html")}}])}(),function(){angular.module("ljxTools").controller("ljxPageControlCtrl",["$scope",function(e){e._currentPage=1,e._buttons=[],e._buttonStep=0,e._pageCount=1,e._startPage=1,e._endPage=1,e._getButton=function(e,t,a){return{key:e,value:t,isActive:a}},e._refreshButtons=function(t){e._buttons=[],"true"==e.isShowScollButton&&(e._buttons.push(e._getButton("first","首页",!1)),e._buttons.push(e._getButton("priou","前"+e._buttonStep+"页",!1)));var a=0;t<e._startPage?e._startPage-1<e.buttonsCount?(a=e._startPage-1,e._startPage=e._startPage-a,e._endPage=e._endPage-a):(e._startPage=e._startPage-e.buttonsCount,e._endPage=e._endPage-e.buttonsCount):t>e._endPage?e._pageCount-e._endPage<e.buttonsCount?(a=e._pageCount-e._endPage,e._startPage=e._startPage+a,e._endPage=e._endPage+a):(e._startPage=e._startPage+e.buttonsCount,e._endPage=e._endPage+e.buttonsCount):e._endPage=Math.min(e._endPage,e._pageCount);for(var o=e._startPage;o<=e._endPage;o++)e._buttons.push(e._getButton(o,o,o==e._currentPage));"true"==e.isShowScollButton&&(e._buttons.push(e._getButton("next","后"+e._buttonStep+"页",!1)),e._buttons.push(e._getButton("last","尾页",!1)))},e._pageButtonClick=function(t){"first"==t.key?e._toFirst():"last"==t.key?e._toLast():"priou"==t.key?e._toPriou():"next"==t.key?e._toNext():e._toPage(t.key)},e._toFirst=function(){e._toPage(1)},e._toLast=function(){e._toPage(e._pageCount)},e._toPriou=function(){e._toPage(e._currentPage-e._buttonStep)},e._toNext=function(){e._toPage(e._currentPage+e._buttonStep)},e._toPage=function(t){t!=e._currentPage&&(t<1?e._currentPage=1:t>e._pageCount?e._currentPage=e._pageCount:e._currentPage=t,e._refreshButtons(e._currentPage),e.currentPage=e._currentPage,e.$emit("currentPageChanged",{currentPage:e._currentPage}))},e._getTemplateUrl=function(){var t="";return t="app"==e.platform?$('script[src*="ljxSaleGoods.js"]').length>0?$('script[src*="ljxSaleGoods.js"]').attr("src").replace("ljxSaleGoods.js","directives/ljxPageControl.directive.app.html"):$('script[src*="ljxSaleGoods.min.js"]').attr("src").replace("ljxSaleGoods.min.js","directives/ljxPageControl.directive.app.html"):$('script[src*="ljxSaleGoods.js"]').length>0?$('script[src*="ljxSaleGoods.js"]').attr("src").replace("ljxSaleGoods.js","directives/ljxPageControl.directive.pc.html"):$('script[src*="ljxSaleGoods.min.js"]').attr("src").replace("ljxSaleGoods.min.js","directives/ljxPageControl.directive.pc.html")}}])}(),function(){"use strict";angular.module("ljxTools").controller("ljxStarToolCtrl",["$scope",function(e){e.componentName="ljxStarTool",this.scope=e,e._stars=[],e.itemClick=function(t){e.enableEdit&&(e.starNumber=t+1,e.refresh(),e.onValueChanged())},e.refresh=function(){e._stars=[];for(var t=0;t<e.maxValue;t++){var a={color:t<e.starNumber?"#ff8a00":"gainsboro"};e._stars.push(a)}},e.onValueChanged=function(){e.$emit("valueChanged",{componentName:e.componentName,value:e.starNumber})},e._getTemplateUrl=function(){var t="";return t="app"==e.platform?$('script[src*="ljxSaleGoods.js"]').length>0?$('script[src*="ljxSaleGoods.js"]').attr("src").replace("ljxSaleGoods.js","directives/ljxStarTool.directive.app.html"):$('script[src*="ljxSaleGoods.min.js"]').attr("src").replace("ljxSaleGoods.min.js","directives/ljxStarTool.directive.app.html"):$('script[src*="ljxSaleGoods.js"]').length>0?$('script[src*="ljxSaleGoods.js"]').attr("src").replace("ljxSaleGoods.js","directives/ljxStarTool.directive.pc.html"):$('script[src*="ljxSaleGoods.min.js"]').attr("src").replace("ljxSaleGoods.min.js","directives/ljxStarTool.directive.pc.html")}}])}(),function(){angular.module("ljxTools").controller("ljxTableCtrl",["$scope",function(e){e._isShowPage=!1,e._isShowDetail=!1,e._pageCount=0,e._startIndex=0,e._pageData=[],e._allData=[],e._rowInfo=[],e._getIsShowTitle=function(){return"true"==e.isShowTitle},e._initColumnClass=function(){for(var t="col-lg-1 col-md-2 col-sm-2 col-xs-3",a="col-lg-1 col-md-2 col-sm-2 hidden-xs",o="col-lg-1 hidden-md hidden-sm hidden-xs",l=[],r=0;r<e._pageData.fields.length;r++)e._pageData.fields[r].isShowInCol!==!0&&"true"!==e._pageData.fields[r].isShowInCol||l.push(e._pageData.fields[r]);for(r=0;r<l.length;r++)r<3?l[r].css=t:r<5?l[r].css=a:l[r].css=o},e._cloneDataStruct=function(e){for(var t={tableName:e.tableName,rootLink:e.rootLink,fields:[],items:[]},a=0;a<e.fields.length;a++)t.fields.push(e.fields[a]);return t},e._refreshRowInfo=function(t){e._rowInfo=[];for(var a in t)if("$$hashKey"!=a){var o={};o.key=a,o.align=e._getFieldAlign(a),o.isShow=e._isShowInDetail(a),o.value=t[a],e._rowInfo.push(o)}},e._isShowInDetail=function(t){for(var a=0;a<e._pageData.fields.length;a++)if(e._pageData.fields[a].name==t)return e._pageData.fields[a].isShowInDetial;return!0},e._getFieldAlign=function(t){for(var a=0;a<e._pageData.fields.length;a++)if(e._pageData.fields[a].name==t)return e._pageData.fields[a].align;return""},e._showTable=function(){e._isShowDetail=!1},e._onRowClicked=function(t){e.$emit("rowClicked",{item:t}),"true"==e.enableShowDetail&&(e._isShowDetail=!0,e._refreshRowInfo(t))},e._onCellClicked=function(t,a,o){e.$emit("cellClicked",{item:t,field:a,value:o})},e._getTemplateUrl=function(){var t="";return t="app"==e.platform?$('script[src*="ljxSaleGoods.js"]').length>0?$('script[src*="ljxSaleGoods.js"]').attr("src").replace("ljxSaleGoods.js","directives/ljxTable.directive.app.html"):$('script[src*="ljxSaleGoods.min.js"]').attr("src").replace("ljxSaleGoods.min.js","directives/ljxTable.directive.app.html"):$('script[src*="ljxSaleGoods.js"]').length>0?$('script[src*="ljxSaleGoods.js"]').attr("src").replace("ljxSaleGoods.js","directives/ljxTable.directive.pc.html"):$('script[src*="ljxSaleGoods.min.js"]').attr("src").replace("ljxSaleGoods.min.js","directives/ljxTable.directive.pc.html")},e.$on("dataChanged",function(t,a){if(e._pageCount!=a.pageCount&&e.$broadcast("pageCountChanged",{pageCount:a.pageCount}),e._isShowPage="1"!=a.pageCount,"true"==e.isAllData)if(e._allData=a.data,e._pageCount=a.pageCount,1==e._pageCount)e._pageData=e._allData;else{e._pageData=e._cloneDataStruct(e._allData);for(var o=0;o<e.pageStep;o++)e._pageData.items.push(e._allData.items[o])}else e._pageData=a.data,e._pageCount=a.pageCount;e._initColumnClass()}),e.$on("currentPageChanged",function(t,a){if(t.stopPropagation(),e._startIndex=(parseInt(a.currentPage)-1)*e.pageStep,"true"==e.isAllData){var o=parseInt(a.currentPage)*e.pageStep-1;o=Math.min(o,e._allData.items.length-1),e._pageData=e._cloneDataStruct(e._allData);for(var l=e._startIndex;l<=o;l++)e._pageData.items.push(e._allData.items[l])}else e.$emit("startIndexChanged",{startIndex:e._startIndex,length:e.pageStep})})}]).filter("rowDetialFilter",function(){return function(e){var t=[];if(e)for(var a=0;a<e.length;a++)e[a].isShow!==!0&&"true"!==e[a].isShow||t.push(e[a]);return t}}).filter("colFilter",function(){return function(e){var t=[];if(e)for(var a=0;a<e.length;a++)e[a].isShowInCol!==!0&&"true"!==e[a].isShowInCol||t.push(e[a]);return t}})}(),function(){"use strict";angular.module("ljxTools").directive("ljxGoodsBox",function(){return{scope:{maxItems:"@",classifyId:"@",classifyName:"@",displayType:"@",platform:"@"},require:["ngModel"],controller:"ljxGoodsBoxCtrl",template:'<div class="templateDiv" ng-include="_getTemplateUrl()"></div>',replace:!0,link:function(e,t,a,o){var l=o[0];l.$render=function(){l.$modelValue instanceof Array?e.items=l.$modelValue:(e.items=[],e.items.push(l.$modelValue))},e.$watch("displayType",function(e,t,a){var o="";if("CellBox"==e?o="BoxItem":"RowBox"==e&&(o="RowItem"),""!==o)for(var l=0;l<a.items.length;l++)a.items[l]&&(a.items[l].displayType=o)}),e.$watch("items",function(e,t,a){var o="";if("CellBox"==a.displayType?o="BoxItem":"RowBox"==a.displayType&&(o="RowItem"),""!==o)for(var l=0;l<a.items.length;l++)a.items[l]&&(a.items[l].displayType=o)})}}})}(),function(){"use strict";angular.module("ljxTools").directive("ljxGoodsItem",function(){return{scope:!0,controller:"ljxGoodsItemCtrl",replace:!0,template:'<div class="templateDiv" ng-include="_getTemplateUrl()"></div>'}})}(),function(){"use strict";angular.module("ljxTools").directive("ljxListBox",function(){return{scope:{count:"@",items:"=",displayMode:"@",pageStep:"@",itemTemplate:"@",queryAllData:"&",queryPageData:"&",platform:"@"},controller:"ljxListBoxCtrl",template:'<div class="templateDiv" ng-include="_getTemplateUrl()"></div>',replace:!0,link:function(e,t,a,o){a.items||(e.items=[]),a.displayMode||(e.displayMode="显示全部"),a.pageStep||(e.pageStep=10),e.$watch("items",function(t,a){e.init()}),e.$watch("displayMode",function(t,a){e.init()}),e.$watch("pageStep",function(t,a){e.init()}),e.$on("currentPageChanged",function(t,a){e._toPage(a.currentPage)})}}})}(),function(){"use strict";angular.module("ljxTools").directive("ljxMobileTree",function(){return{scope:{itemTemplate:"@",clickCallback:"&",platform:"@"},require:["ngModel"],controller:"ljxMobileTreeCtrl",template:'<div class="templateDiv" ng-include="_getTemplateUrl()"></div>',replace:!0,link:function(e,t,a,o){var l=o[0];l.$render=function(){l.$modelValue instanceof Array?(e.nodes=l.$modelValue,e.list=e.nodes):(e.nodes=[],e.nodes.push(l.$modelValue),e.list=e.nodes)}}}})}(),function(){"use strict";angular.module("ljxTools").directive("ljxPageControl",function(){return{scope:{buttonsCount:"@",pageCount:"=",currentPage:"=",isShowScollButton:"=",platform:"@"},controller:"ljxPageControlCtrl",template:'<div class="templateDiv" ng-include="_getTemplateUrl()"></div>',replace:!0,link:function(e,t,a,o){e.$watch("pageCount",function(t,a){e._pageCount=t,e._buttonStep=e.buttonsCount-1,e._endPage=Math.min(e._buttonStep,parseInt(t)),e._refreshButtons(1)})}}})}(),function(){"use strict";angular.module("ljxTools").directive("ljxStarTool",[function(){return{scope:{maxValue:"@",starNumber:"=",enableEdit:"@",platform:"@"},controller:"ljxStarToolCtrl",template:'<div class="templateDiv" ng-include="_getTemplateUrl()"></div>',replace:!0,link:function(e,t,a,o){a.maxValue||(e.maxValue=5),a.starNumber||(e.starNumber=0),a.enableEdit||(e.enableEdit=!1),e.$watch("maxValue",function(t,a){e.refresh()}),e.$watch("starNumber",function(t,a){e.refresh()})}}}])}(),function(){"use strict";angular.module("ljxTools").directive("ljxTable",function(){return{scope:{pageStep:"@",isAllData:"@",enableShowDetail:"@",isShowTitle:"@",platform:"@"},controller:"ljxTableCtrl",template:'<div class="templateDiv" ng-include="_getTemplateUrl()"></div>',replace:!0,link:function(e,t,a,o){}}})}();